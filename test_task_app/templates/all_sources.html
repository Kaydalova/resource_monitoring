{% extends "base.html" %}
{% block title %}  Все ресурсы {%endblock %}

{% block content %}
<main>
  <section class="container my-5">

    <h1>Все ресурсы </h1>
    <br>
    <br>

    <!-- Форма для фильтрации -->
    <form action="/" method="get" class="row g-3">
      <div class="col-auto">
      <input type="text" name="domain_name" placeholder="Доменное имя" class="form-control">
    </div>
    <div class="col-auto">
      <input type="text" name="domain_zone" placeholder="Доменная зона" class="form-control">
    </div>
    <div class="col-auto">
      <select name="status" class="form-select">
          <option value="">Статус доступности</option>
          <option value="available">Доступен</option>
          <option value="unavailable">Недоступен</option>
      </select>
    </div>
      <br>
      <br>
      <div class="col-auto">
      <button type="submit" class="btn btn-primary">Применить фильтр</button>
    </div>
  </form>
  <br>
  <br>

    <!-- Таблица с данными -->
    <div class="col-12 col-lg-7 my-5">
    <table class="table table-hover">
      <thead class="table-dark">
          <tr>
              <th>ID</th>
              <th>Доменное имя</th>
              <th>Доменная зона</th>
              <th>Полная ссылка</th>
              <th>Статус доступности</th>
              <th>Удалить</th>
          </tr>
      </thead>
      <tbody>
          {% for source in sources %}
          <tr>
              <td>{{ source.id }}</td>
              <td>{{ source.domain }}</td>
              <td>{{ source.domain_zone }}</td>
              <td>{{ source.full_link }}</td>
              <td>{{ source.status_code }}</td>
              <td><a href="{{ url_for('delete_source_view', source_id=source.id) }}"
                class="btn btn-outline-danger">Удалить</a></td>
          </tr>
          {% endfor %}
      </tbody>
  </table>
</div>


    <!-- Пагинация -->
          <div>
          {% for page_num in sources.iter_pages(
            left_edge=1, right_edge=1, left_current=1, right_current=1)%}
            {% if page_num %}
            {% if sources.page == page_num %}
          <a class="btn btn-primary mb-4"
          href="{{ url_for('get_sources_view', page=page_num) }}">{{ page_num }}</a>
        {% else %}
        <a class="btn btn-primary mb-4"
          href="{{ url_for('get_sources_view', page=page_num) }}">{{ page_num }}</a>
        {% endif %} {% else %} ... {% endif %} {% endfor %}
        </div>

    </section>
  </main>
  {% endblock %}